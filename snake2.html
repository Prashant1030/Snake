<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Snake Game (No Wall Death)</title>
  <style>
    canvas {
      background: #000;
      display: block;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <canvas id="game" width="400" height="400"></canvas>
  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const gridSize = 20;
    let snake = [
  { x: 200, y: 200 },           // Head
  { x: 180, y: 200 },           // Body
  { x: 160, y: 200 }            // Tail
];

    let direction = { x: gridSize, y: 0 };
    let food = { x: 100, y: 100 };
    let score = 0;

    function drawRect(x, y, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x, y, gridSize, gridSize);
    }
function drawEyes(x, y) {
  ctx.fillStyle = "white";
  const eyeSize = 4;
  ctx.beginPath();
  ctx.arc(x + 5, y + 5, eyeSize, 0, Math.PI * 2); // Left eye
  ctx.arc(x + 15, y + 5, eyeSize, 0, Math.PI * 2); // Right eye
  ctx.fill();
}

function drawPointedTail(x, y) {
  ctx.fillStyle = "darkgreen";
  ctx.beginPath();
  ctx.moveTo(x, y + gridSize);           // Bottom left
  ctx.lineTo(x + gridSize / 2, y);       // Top center
  ctx.lineTo(x + gridSize, y + gridSize); // Bottom right
  ctx.closePath();
  ctx.fill();
}

    function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Draw tail (last segment)
  const tail = snake[snake.length - 1];
  drawPointedTail(tail.x, tail.y);

  // Draw body segments
  for (let i = 1; i < snake.length - 1; i++) {
    drawRect(snake[i].x, snake[i].y, "green");
  }

  // Draw head (first segment)
  const head = snake[0];
  drawRect(head.x, head.y, "lime");
  drawEyes(head.x, head.y);
  
  // Draw food
  drawRect(food.x, food.y, "red");
}

    function moveSnake() {
      let head = {
        x: snake[0].x + direction.x,
        y: snake[0].y + direction.y
      };

      // Wrap around walls
      head.x = (head.x + canvas.width) % canvas.width;
      head.y = (head.y + canvas.height) % canvas.height;

      snake.unshift(head);

      if (head.x === food.x && head.y === food.y) {
        score++;
        food = {
          x: Math.floor(Math.random() * canvas.width / gridSize) * gridSize,
          y: Math.floor(Math.random() * canvas.height / gridSize) * gridSize
        };
      } else {
        snake.pop();
      }
    }

    function checkSelfCollision() {
      const head = snake[0];
      for (let i = 1; i < snake.length; i++) {
        if (snake[i].x === head.x && snake[i].y === head.y) {
          alert("Game Over! Score: " + score);
          resetGame();
          return;
        }
      }
    }

    function resetGame() {
      snake = [{ x: 200, y: 200 }];
      direction = { x: gridSize, y: 0 };
      score = 0;
      food = {
        x: Math.floor(Math.random() * canvas.width / gridSize) * gridSize,
        y: Math.floor(Math.random() * canvas.height / gridSize) * gridSize
      };
    }

    document.addEventListener("keydown", e => {
      const keyMap = {
        ArrowUp: { x: 0, y: -gridSize },
        ArrowDown: { x: 0, y: gridSize },
        ArrowLeft: { x: -gridSize, y: 0 },
        ArrowRight: { x: gridSize, y: 0 }
      };
      const newDir = keyMap[e.key];
      if (newDir && (newDir.x !== -direction.x || newDir.y !== -direction.y)) {
        direction = newDir;
      }
    });

    function gameLoop() {
      moveSnake();
      checkSelfCollision();
      draw();
    }

    setInterval(gameLoop, 100);
  </script>
</body>
</html>
